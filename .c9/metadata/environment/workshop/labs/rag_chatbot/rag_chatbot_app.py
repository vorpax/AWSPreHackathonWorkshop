{"filter":false,"title":"rag_chatbot_app.py","tooltip":"/workshop/labs/rag_chatbot/rag_chatbot_app.py","undoManager":{"mark":8,"position":8,"stack":[[{"start":{"row":0,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["import streamlit as st #all streamlit commands will be available through the \"st\" alias","import rag_chatbot_lib as glib #reference to local lib script",""],"id":1}],[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":2}],[{"start":{"row":3,"column":0},"end":{"row":6,"column":0},"action":"insert","lines":["","st.set_page_config(page_title=\"RAG Chatbot\") #HTML title","st.title(\"RAG Chatbot\") #page title",""],"id":3}],[{"start":{"row":6,"column":0},"end":{"row":7,"column":0},"action":"insert","lines":["",""],"id":4},{"start":{"row":7,"column":0},"end":{"row":8,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":8,"column":0},"end":{"row":11,"column":0},"action":"insert","lines":["","if 'chat_history' not in st.session_state: #see if the chat history hasn't been created yet","    st.session_state.chat_history = [] #initialize the chat history",""],"id":5}],[{"start":{"row":11,"column":0},"end":{"row":12,"column":0},"action":"insert","lines":["",""],"id":6}],[{"start":{"row":12,"column":0},"end":{"row":20,"column":0},"action":"insert","lines":["","chat_container = st.container()","","input_text = st.chat_input(\"Chat with your bot here\") #display a chat input box","","if input_text:","    glib.chat_with_model(message_history=st.session_state.chat_history, new_text=input_text)","",""],"id":7}],[{"start":{"row":20,"column":0},"end":{"row":21,"column":0},"action":"insert","lines":["",""],"id":8},{"start":{"row":21,"column":0},"end":{"row":22,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":22,"column":0},"end":{"row":28,"column":0},"action":"insert","lines":["","#Re-render the chat history (Streamlit re-runs this script, so need this to preserve previous chat messages)","for message in st.session_state.chat_history: #loop through the chat history","    with chat_container.chat_message(message.role): #renders a chat line for the given role, containing everything in the with block","        st.markdown(message.text) #display the chat content","",""],"id":9}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":28,"column":0},"end":{"row":28,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1737189179630,"hash":"4f0baf12702c538062c9970c1b9de0caf5eaff4a"}