{"filter":false,"title":"chatbot_app.py","tooltip":"/workshop/labs/chatbot/chatbot_app.py","undoManager":{"mark":8,"position":8,"stack":[[{"start":{"row":0,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["","import streamlit as st #all streamlit commands will be available through the \"st\" alias","import chatbot_lib as glib #reference to local lib script",""],"id":2}],[{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":3}],[{"start":{"row":4,"column":0},"end":{"row":7,"column":0},"action":"insert","lines":["","st.set_page_config(page_title=\"Chatbot\") #HTML title","st.title(\"Chatbot\") #page title",""],"id":4}],[{"start":{"row":7,"column":0},"end":{"row":8,"column":0},"action":"insert","lines":["",""],"id":5}],[{"start":{"row":8,"column":0},"end":{"row":11,"column":0},"action":"insert","lines":["","if 'chat_history' not in st.session_state: #see if the chat history hasn't been created yet","    st.session_state.chat_history = [] #initialize the chat history",""],"id":6}],[{"start":{"row":11,"column":0},"end":{"row":12,"column":0},"action":"insert","lines":["",""],"id":7}],[{"start":{"row":12,"column":0},"end":{"row":19,"column":0},"action":"insert","lines":["","chat_container = st.container()","","input_text = st.chat_input(\"Chat with your bot here\") #display a chat input box","","if input_text:","    glib.chat_with_model(message_history=st.session_state.chat_history, new_text=input_text)",""],"id":8}],[{"start":{"row":19,"column":0},"end":{"row":20,"column":0},"action":"insert","lines":["",""],"id":9},{"start":{"row":20,"column":0},"end":{"row":21,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":21,"column":0},"end":{"row":26,"column":0},"action":"insert","lines":["","#Re-render the chat history (Streamlit re-runs this script, so need this to preserve previous chat messages)","for message in st.session_state.chat_history: #loop through the chat history","    with chat_container.chat_message(message.role): #renders a chat line for the given role, containing everything in the with block","        st.markdown(message.text) #display the chat content",""],"id":10}]]},"ace":{"folds":[],"scrolltop":180,"scrollleft":0,"selection":{"start":{"row":2,"column":57},"end":{"row":2,"column":57},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":22,"state":"start","mode":"ace/mode/python"}},"timestamp":1737188628176,"hash":"426b099e96e8b5aa9102987935ee6232a5f5fa11"}