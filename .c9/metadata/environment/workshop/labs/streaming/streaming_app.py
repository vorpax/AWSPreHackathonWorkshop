{"filter":false,"title":"streaming_app.py","tooltip":"/workshop/labs/streaming/streaming_app.py","undoManager":{"mark":6,"position":6,"stack":[[{"start":{"row":0,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["import streaming_lib as glib  # reference to local lib script","import streamlit as st",""],"id":1}],[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":2}],[{"start":{"row":3,"column":0},"end":{"row":5,"column":0},"action":"insert","lines":["st.set_page_config(page_title=\"Response Streaming\")  # HTML title","st.title(\"Response Streaming\")  # page title",""],"id":3}],[{"start":{"row":5,"column":0},"end":{"row":6,"column":0},"action":"insert","lines":["",""],"id":4}],[{"start":{"row":6,"column":0},"end":{"row":8,"column":0},"action":"insert","lines":["input_text = st.text_area(\"Input text\", label_visibility=\"collapsed\")","go_button = st.button(\"Go\", type=\"primary\")  # display a primary button",""],"id":5}],[{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""],"id":6}],[{"start":{"row":9,"column":0},"end":{"row":21,"column":0},"action":"insert","lines":["if go_button:  # code in this if block will be run when the button is clicked","","    with st.empty():","        combined_response = \"\"","        ","        def streaming_callback(chunk):","            global combined_response","            ","            combined_response += chunk","            st.write(combined_response)","        ","        glib.get_streaming_response(prompt=input_text, streaming_callback=streaming_callback)",""],"id":7}]]},"ace":{"folds":[],"scrolltop":47,"scrollleft":0,"selection":{"start":{"row":21,"column":0},"end":{"row":21,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":2,"state":"start","mode":"ace/mode/python"}},"timestamp":1737189832366,"hash":"c364e4b89fae42fd45af8ad42827977b4aec5755"}