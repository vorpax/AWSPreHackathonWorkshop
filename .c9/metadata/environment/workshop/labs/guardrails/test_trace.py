{"filter":false,"title":"test_trace.py","tooltip":"/workshop/labs/guardrails/test_trace.py","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":35,"column":24},"action":"insert","lines":["import random, string, boto3, json, pprint, test_helper as glib","","prompt = glib.get_prompt_from_command_line()","guardrail_id = glib.get_guardrail_id('content_blocking_guardrail_id')","","session = boto3.Session()","bedrock = session.client(service_name='bedrock-runtime') #creates a Bedrock client","","body = {","    \"inputText\": prompt,","    \"textGenerationConfig\": {","        \"maxTokenCount\": 512,","        \"stopSequences\": [],","        \"temperature\": 0,","        \"topP\": 0.9","    }","}","","response = bedrock.invoke_model(","    body=json.dumps(body),","    modelId=\"amazon.titan-text-express-v1\",","    contentType=\"application/json\",","    accept=\"application/json\",","    guardrailIdentifier=guardrail_id,","    guardrailVersion=\"DRAFT\", #this is fine during development, but we should set this to a specific version number for testing and production.","    trace=\"ENABLED\" #Set trace to \"ENABLED\" to see the details of guardrail actions, otherwise set to \"DISABLED\"",")","","response_body = json.loads(response.get('body').read()) # read the response","","response_text = response_body['results'][0]['outputText']","","print(response_text)","","print(\"\\nRESPONSE BODY:\\n\")","pprint.pp(response_body)"],"id":1}]]},"ace":{"folds":[],"scrolltop":98,"scrollleft":0,"selection":{"start":{"row":29,"column":0},"end":{"row":29,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":24,"state":"start","mode":"ace/mode/python"}},"timestamp":1737202453962,"hash":"0393ea15379592f46090a52a4b1cabd3fd0276e5"}